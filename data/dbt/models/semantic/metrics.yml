version: 2

metrics:
  - name: articles_ingested
    type: simple
    label: "Articles ingested"
    type_params:
      measure:
        name: articles_count
        fill_nulls_with: 0

  - name: unique_sources
    type: simple
    label: "Unique sources"
    type_params:
      measure:
        name: sources_count
        fill_nulls_with: 0

  - name: avg_article_sentiment
    type: simple
    label: "Avg article sentiment"
    type_params:
      measure:
        name: avg_sentiment

  - name: articles_7d
    type: cumulative
    label: "Articles (rolling 7d)"
    type_params:
      measure:
        name: articles_count
        fill_nulls_with: 0
        join_to_timespine: true
      cumulative_type_params:
        window: 7 days
