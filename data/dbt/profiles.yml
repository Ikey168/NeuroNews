# dbt profiles configuration for NeuroNews analytics
# This file configures database connections for different environments

neuronews:
  # Default target for local development
  target: dev
  outputs:
    
    # DuckDB target for development (Simple setup)
    dev:
      type: duckdb
      path: './dev.db'
      threads: 4
      retry_all: true
    
    # Spark production target for Iceberg
    prod:
      type: spark
      method: thrift
      host: spark-thrift-server
      port: 10000
      user: spark
      database: demo
      schema: neuronews_prod
      threads: 8
      connect_retries: 5
      connect_timeout: 60
      retry_all: true

    # Alternative HTTP method configuration for Spark
    dev_http:
      type: spark
      method: http
      host: localhost
      port: 10001
      user: spark
      database: demo
      schema: neuronews
      threads: 4
      connect_retries: 5
      connect_timeout: 60
      retry_all: true

# Required environment variables for Spark (add to .env or CI/CD):
# 
# Spark Thrift Server:
# SPARK_THRIFT_HOST=localhost (or spark-thrift-server for prod)
# SPARK_THRIFT_PORT=10000
# SPARK_USER=spark
# SPARK_DATABASE=demo
# SPARK_SCHEMA=neuronews
#
# Iceberg Catalog Configuration:
# ICEBERG_CATALOG_TYPE=hadoop
# ICEBERG_WAREHOUSE_PATH=/tmp/warehouse
# 
# For production with Hive Metastore:
# HIVE_METASTORE_URIS=thrift://hive-metastore:9083
