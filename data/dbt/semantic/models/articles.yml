# Articles Semantic Model
# Defines the semantic layer for article content and metadata

semantic_models:
  - name: articles
    description: "Core semantic model for NeuroNews articles with content, metadata, and publishing information"
    model: ref('articles')  # References the articles model in dbt
    
    # Primary entity - represents the grain of the semantic model
    entities:
      - name: article_id
        type: primary
        expr: article_id
        
      - name: author
        type: foreign
        expr: author_name
        
      - name: source
        type: foreign
        expr: source_name

    # Dimensions - attributes that can be used for grouping and filtering
    dimensions:
      - name: published_date
        type: time
        type_params:
          time_granularity: day
        expr: published_date
        
      - name: category
        type: categorical
        expr: category
        
      - name: source_name
        type: categorical
        expr: source_name
        
      - name: author_name
        type: categorical
        expr: author_name
        
      - name: title
        type: categorical
        expr: title
        
      - name: word_count
        type: numerical
        expr: word_count
        
      - name: sentiment_score
        type: numerical
        expr: sentiment_score
        
      - name: is_breaking_news
        type: categorical
        expr: is_breaking_news

    # Measures - numeric values that can be aggregated
    measures:
      - name: article_count
        description: "Total number of articles"
        agg: count
        expr: article_id
        
      - name: total_word_count
        description: "Sum of word counts across articles"
        agg: sum
        expr: word_count
        
      - name: avg_word_count
        description: "Average word count per article"
        agg: average
        expr: word_count
        
      - name: avg_sentiment_score
        description: "Average sentiment score across articles"
        agg: average
        expr: sentiment_score
        
      - name: unique_authors
        description: "Count of unique authors"
        agg: count_distinct
        expr: author_name
        
      - name: unique_sources
        description: "Count of unique sources"
        agg: count_distinct
        expr: source_name
