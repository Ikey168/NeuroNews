version: 2

sources:
  - name: postgres
    description: "PostgreSQL database containing scraped news articles and metadata"
    database: neuronews  # This will be different for DuckDB vs Snowflake
    schema: public
    
    tables:
      - name: articles
        description: "Main articles table with content, metadata, and analysis results"
        columns:
          - name: id
            description: "Primary key for articles"
            tests:
              - unique
              - not_null
          
          - name: title
            description: "Article headline/title"
            tests:
              - not_null
          
          - name: content
            description: "Full article text content"
            tests:
              - not_null
          
          - name: url
            description: "Original article URL"
            tests:
              - unique
              - not_null
          
          - name: source
            description: "News source/publication name"
            tests:
              - not_null
          
          - name: published_date
            description: "When the article was originally published"
          
          - name: scraped_at
            description: "When the article was scraped by our system"
            tests:
              - not_null
          
          - name: sentiment
            description: "Sentiment analysis result (positive/negative/neutral)"
            tests:
              - accepted_values:
                  values: ['positive', 'negative', 'neutral']
          
          - name: sentiment_score
            description: "Numerical sentiment score (-1 to 1)"
          
          - name: language
            description: "Detected language of the article"
          
          - name: translated_title
            description: "English translation of title (if original was non-English)"
          
          - name: translated_content
            description: "English translation of content (if original was non-English)"
          
          - name: created_at
            description: "Record creation timestamp"
            tests:
              - not_null
          
          - name: updated_at
            description: "Record last update timestamp"
            tests:
              - not_null
