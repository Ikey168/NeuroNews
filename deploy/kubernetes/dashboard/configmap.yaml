apiVersion: v1
kind: ConfigMap
metadata:
  name: dashboard-config
  namespace: neuronews
  labels:
    app: neuronews-dashboard
    component: configuration
  annotations:
    description: "Configuration for NeuroNews Streamlit Dashboard"
data:
  # Application Configuration
  ENVIRONMENT: "production"
  PYTHONPATH: "/app"
  
  # API Endpoints
  FASTAPI_URL: "http://fastapi-service.neuronews.svc.cluster.local:8000"
  KNOWLEDGE_GRAPH_API_URL: "http://knowledge-graph-api-service.neuronews.svc.cluster.local:80"
  
  # Dashboard Configuration
  STREAMLIT_SERVER_PORT: "8501"
  STREAMLIT_SERVER_ADDRESS: "0.0.0.0"
  STREAMLIT_SERVER_HEADLESS: "true"
  STREAMLIT_BROWSER_GATHER_USAGE_STATS: "false"
  STREAMLIT_SERVER_FILE_WATCHER_TYPE: "none"
  STREAMLIT_SERVER_ENABLE_CORS: "true"
  STREAMLIT_SERVER_ENABLE_XSRF_PROTECTION: "false"
  
  # Database Configuration
  DB_HOST: "postgres-service.neuronews.svc.cluster.local"
  DB_PORT: "5432"
  DB_NAME: "neuronews_prod"
  DB_USER: "neuronews"
  
  # Redis Configuration (for caching)
  REDIS_HOST: "redis-service.neuronews.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "1"  # Use different DB than Knowledge Graph API
  
  # Dashboard Features
  ENABLE_REAL_TIME_UPDATES: "true"
  UPDATE_INTERVAL_SECONDS: "30"
  MAX_ARTICLES_PER_PAGE: "50"
  DEFAULT_TIME_RANGE_HOURS: "24"
  
  # Monitoring and Logging
  LOG_LEVEL: "INFO"
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"
  
  # External Services
  NEWS_API_TIMEOUT: "30"
  ENABLE_EXTERNAL_APIs: "true"
  
  # Security Settings
  ENABLE_AUTHENTICATION: "false"  # Set to true for production with auth
  SESSION_TIMEOUT_MINUTES: "60"
  
  # Performance Settings
  CACHE_TTL_SECONDS: "300"  # 5 minutes
  MAX_CONCURRENT_REQUESTS: "100"
  REQUEST_TIMEOUT_SECONDS: "30"

---
apiVersion: v1
kind: Secret
metadata:
  name: dashboard-secrets
  namespace: neuronews
  labels:
    app: neuronews-dashboard
    component: configuration
  annotations:
    description: "Sensitive configuration for NeuroNews Dashboard"
type: Opaque
data:
  # Replace with actual base64 encoded credentials during deployment
  DB_PASSWORD: REPLACE_WITH_ACTUAL_DB_PASSWORD_B64
  
  # Redis password (if required)
  REDIS_PASSWORD: REPLACE_WITH_ACTUAL_REDIS_PASSWORD_B64
  
  # API Keys for external services
  NEWS_API_KEY: REPLACE_WITH_ACTUAL_NEWS_API_KEY_B64
  OPENAI_API_KEY: REPLACE_WITH_ACTUAL_OPENAI_API_KEY_B64
  
  # Session secret for authentication
  SESSION_SECRET: REPLACE_WITH_ACTUAL_SESSION_SECRET_B64
  
  # Monitoring credentials
  METRICS_USERNAME: REPLACE_WITH_ACTUAL_METRICS_USERNAME_B64
  METRICS_PASSWORD: REPLACE_WITH_ACTUAL_METRICS_PASSWORD_B64

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: dashboard-streamlit-config
  namespace: neuronews
  labels:
    app: neuronews-dashboard
    component: streamlit-config
data:
  config.toml: |
    [global]
    developmentMode = false
    logLevel = "info"
    unitTest = false
    
    [server]
    port = 8501
    address = "0.0.0.0"
    headless = true
    runOnSave = false
    allowRunOnSave = false
    fileWatcherType = "none"
    cookieSecret = "neuronews-dashboard-secret"
    enableCORS = true
    enableXsrfProtection = false
    maxUploadSize = 200
    maxMessageSize = 200
    enableWebsocketCompression = false
    
    [browser]
    gatherUsageStats = false
    serverAddress = "0.0.0.0"
    serverPort = 8501
    
    [client]
    caching = true
    showErrorDetails = false
    
    [runner]
    magicEnabled = true
    installTracer = false
    fixMatplotlib = true
    postScriptGC = true
    fastReruns = true
    enforceSerializableSessionState = false
    
    [logger]
    level = "info"
    messageFormat = "%(asctime)s %(levelname)s: %(message)s"
    
    [theme]
    primaryColor = "#1f77b4"
    backgroundColor = "#ffffff"
    secondaryBackgroundColor = "#f0f2f6"
    textColor = "#262730"
    font = "sans serif"
