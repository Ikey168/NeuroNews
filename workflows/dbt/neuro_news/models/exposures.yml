version: 2

exposures:
  - name: metrics_api
    type: application
    url: https://localhost:8000/metrics
    description: |
      NeuroNews Metrics API built on dbt Semantic Layer.
      
      This FastAPI service exposes dbt metrics via MetricFlow for demos and dashboards.
      The API provides endpoints to query metrics, list available metrics and dimensions,
      and perform health checks with MetricFlow validation.
      
      Key endpoints:
      - GET /metrics - Query specific metrics with flexible parameters
      - GET /metrics/available - List all available metrics from semantic layer
      - GET /dimensions - List all available dimensions for grouping
      - GET /health - Health check with MetricFlow validation
      - GET /docs - Interactive API documentation (Swagger UI)
      
      The API supports querying metrics like articles_ingested, unique_sources, and others
      with time-based grouping (day, week, month) and dimensional analysis.
    owner:
      name: NeuroNews
      email: team@neuronews.com
    depends_on:
      - ref('fct_articles')
      - ref('dim_source')
    maturity: medium
    meta:
      purpose: "Expose dbt semantic layer metrics through a REST API for external consumption"
      consumers:
        - "Dashboard applications"
        - "Analytics demos"
        - "Data exploration tools"
      technology_stack:
        - "FastAPI"
        - "MetricFlow"
        - "dbt Semantic Layer"
      deployment:
        - "Docker containerized"
        - "Local development: uvicorn app:app --reload"
        - "Production: docker-compose up -d"
